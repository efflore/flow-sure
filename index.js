var I=(j)=>typeof j==="function",_=(j)=>j!=null,V=(j)=>j instanceof H,W=(j)=>j instanceof x,K=(j)=>j instanceof G,$=(j)=>V(j)||W(j),b=(j)=>V(j)||W(j)||K(j),X=(j)=>K(j)?j:Q(j),L=function(){return this},Q=(j)=>!_(j)?x.of():$(j)?j:H.of(j),m=(j)=>{try{return X(j())}catch(q){return G.of(q)}},C=async(j,q=0,J=1000)=>{let S=async(T,U)=>{return Promise.resolve(j()).then(X).catch(async(Y)=>{if(T<1)return G.of(Y);return await new Promise((Z)=>setTimeout(Z,U)),S(T-1,U*2)})};return await S(q,J)};async function D(...j){let q=I(j[0])?x.of():Q(j.shift());for(let J of j){if(K(q))break;if(!I(J))return G.of(new TypeError("Expected a function in flow"));q=await C(()=>J(q.get()))}return q}class H{j;static of=(j)=>new H(j);constructor(j){this.value=j}get(){return this.value}}var A=H.prototype;A.map=function(j){return H.of(j(this.value))};A.chain=function(j){return j(this.value)};A.filter=A.guard=function(j){return j(this.value)?this:x.of()};A.or=A.catch=L;A.match=function(j){return I(j.Ok)?j.Ok(this.value):this};class x{static of=()=>new x;get(){return}}var z=x.prototype;z.map=z.chain=z.filter=z.guard=z.catch=L;z.match=function(j){return I(j.Nil)?j.Nil():this};class G{j;static of=(j)=>new G(j instanceof Error?j:new Error(String(j)));constructor(j){this.error=j}get(){throw this.error}}var B=G.prototype;B.map=B.chain=L;B.filter=B.guard=function(){return x.of()};z.or=B.or=function(j){return Q(j())};B.catch=function(j){return console.debug(this),j(this.error)};B.match=function(j){return I(j.Err)?j.Err(this.error):this};export{b as isResult,V as isOk,W as isNil,$ as isMaybe,I as isFunction,K as isErr,_ as isDefined,C as gather,D as flow,Q as ensure,m as attempt,H as Ok,x as Nil,G as Err};
